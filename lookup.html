<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" manifest="js-music-theory.mfdddanifest">
<head>
<script src="javascript/jquery-latest.js"></script>
<link media="screen" href="css/testsuite.css" type="text/css" rel="stylesheet">
<link media="screen,print" href="css/fretboard.css" type="text/css" rel="stylesheet">
<link media="screen,print" href="css/teacher.css" type="text/css" rel="stylesheet">
<link media="print" href="css/fretboard-print.css" type="text/css" rel="stylesheet">
<script type="text/javascript" src="javascript/farbtastic.js"></script>
<link rel="stylesheet" href="farbtastic/farbtastic.css" type="text/css" />
<script src="javascript/array.js"></script>
<script src="javascript/color.js"></script>
<script src="http://cdn.dev.bratliensoftware.com/javascript/dom.js"></script>
<script src="http://cdn.dev.bratliensoftware.com/javascript/draggy.js"></script>
<script src="http://cdn.dev.bratliensoftware.com/javascript/sticky-note.js"></script>
<script src="javascript/js-music-theory.js"></script>
<script src="javascript/guitar.js"></script>
<script src="javascript/timer.js"></script>
<script src="javascript/string.supplant.js"></script>



<script type="text/javascript">


DOM = {};
DOM.element = function() {
  if (arguments.length == 0) { return "ERROR"; }  

  var tag = arguments[0];
  var interface = jQuery('<' + tag + '></' + tag + '>');
  if (arguments.length == 1) {
    return interface;
  }
  
  var children = arguments[1]; 
  if (typeof children == "string") {
    interface.html(children);
  }
  else if (typeof children == "object") { //probably another jquery object
    interface.append(children);
  }
  else {
    children.each(function(child) {
      interface.append(child);  
    });  
  }
  return interface;
};

DOM.li = function() {
  if (arguments.length == 0) { return DOM.element('li'); }
  return DOM.element('li',arguments[0]);
};
DOM.a = function() {
  if (arguments.length == 0) { return DOM.element('a'); }
  return DOM.element('a',arguments[0]);
};
DOM.img = function() {
  if (arguments.length == 0) { return DOM.element('img'); }
  return DOM.element('img',arguments[0]);
};
DOM.td = function() {
  if (arguments.length == 0) { return DOM.element('td'); }
  return DOM.element('td',arguments[0]);
};



JSMT.imageResults = false;  
function jsonp(payload) {


  var study = jQuery('#study');

  ////console.log(payload,'payload');

  payload.select(function(searchResult) {
    ////console.log(searchResult,'s r');
    var li = jQuery('<li></li>');

    var img = jQuery('<img />');
    img.attr('src',searchResult.url);
    
    var a = jQuery('<a></a>');
    a.attr('href',searchResult.url);

    a.append(img);
    li.append(a);    
    study.append(li);
    
  ////var img = jQuery('<img src="{src}" />'.supplant({ src: searchResult.url }));
    ///var a = jQuery('<a href="{src}" />'.supplant({ src: searchResult.url }));
    //a.append(img);
    //jQuery(document).append(a);  
  });


}





function tryRandomPalette() {
  JSMT.myPalette = JSMT.randomPalette();
  var firstGuitar = JSMT.guitars[0];
  firstGuitar.redraw();
  jQuery('.fret-number-6').trigger('click');  
  firstGuitar.harmonizeFirstGrip();
}


 function getUrlVars() {
          var vars = {};
          var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
              vars[key] = value;
          });
          return vars;
      }


$(document).ready(function(){

  //var degreeStr = $('#include_degrees-' + id).val();
  //zz id = fretboardID.replace(/fretboard-/,'');
  ////var degrees = include_degrees(id);
  //console.log(scalesByDegree.length);

var getVars = getUrlVars();


 var scalesByDegree = [ '1,2,3,4,5,6,7'  ];
 

  if (typeof getVars.degrees != "undefined") {
    var verbose = getVars.degrees.replace(/#/g,'sharp').replace(/b/g,'flat');
    
    scalesByDegree = [verbose];
  }



  

  for (var i = 0, l = scalesByDegree.length; i < l; i += 1) {
    var d = document.createElement('div');
    $('#main').append(d);
    var guitar = Guitar({
      degreeList: scalesByDegree[i].split(','), 
      showDegreePicker: false, 
      rootNote: getVars.rootNote 
    });
    JSMT.guitars.push(guitar);
    guitar.renderOn(d);
  }



});

 </script>
</head>
<style type="text/css">


</style>
<body id="css-zen-garden">
  <div id="container">
    <div id="supportingText">
      <div id="main">
      </div><!-- main -->
    </div><!-- supporting-text -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32948445-1']);
  _gaq.push(['_setDomainName', 'bratliensoftware.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
